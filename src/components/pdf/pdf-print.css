/* === FEUILLE DE STYLES PDF DÉDIÉE === */
/* Marges sûres A4 et règles strictes d'impression */

@page { 
  size: A4; 
  margin: 12mm 10mm 12mm 10mm; /* top right bottom left - marges sécurisées */
}

/* Conteneur principal A4 */
.pdf-a4 { 
  width: 190mm; /* Largeur adaptée aux nouvelles marges */
  margin: 0 auto; 
  box-sizing: border-box;
  font-family: 'Inter', Arial, sans-serif;
  color: #111827;
  background: #ffffff;
}

/* === PAGE DE PRÉSENTATION 1/1 STRICTE === */
.cover-page { 
  page-break-after: always !important; 
  height: 273mm !important; /* Hauteur exacte A4 - marges */
  max-height: 273mm !important;
  overflow: hidden !important;
  box-sizing: border-box !important;
  display: flex;
  flex-direction: column;
  padding: 0;
}

.cover-body {
  flex: 1 1 auto;
  overflow: hidden;
}

/* Signatures en bas de page présentation */
.cover-signatures {
  display: grid; 
  grid-template-columns: 1fr 1fr; 
  gap: 16mm;
  margin-top: auto;
  padding-top: 8mm; 
  border-top: 1px solid #E5E7EB;
  flex-shrink: 0;
}

/* === BADGES PARFAITEMENT CENTRÉS === */
.badge {
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  min-width: 36px !important;
  min-height: 24px !important;
  padding: 6px 12px !important;
  border-radius: 12px !important;
  font-size: 11px !important;
  font-weight: 600 !important;
  line-height: 1 !important;
  text-align: center !important;
  vertical-align: middle !important;
  white-space: nowrap !important;
  box-sizing: border-box !important;
}

.badge--unique { 
  background: #10b981 !important; 
  color: #ffffff !important; 
}

.badge--mensuel { 
  background: #f59e0b !important; 
  color: #ffffff !important; 
}

.badge--agent { 
  background: #8b5cf6 !important; 
  color: #ffffff !important; 
}

.badge--muted { 
  background: #E5E7EB !important; 
  color: #374151 !important; 
}

/* === EN-TÊTE PDF RÉPÉTÉ === */
.pdf-header {
  display: flex; 
  align-items: flex-end; 
  justify-content: space-between;
  padding-bottom: 8mm; 
  margin-bottom: 8mm; 
  border-bottom: 3px solid #FFD400;
}

.pdf-header__logo { 
  font: 800 36px/1 'Inter', sans-serif; 
  color: #FFD400; 
  letter-spacing: 1px; 
}

.pdf-header__meta { 
  text-align: right; 
  font: 600 12px/1.35 'Inter', sans-serif; 
  color: #111827; 
}

/* === RÈGLES ANTI-COUPURES === */
.avoid-break, 
.keep-together { 
  page-break-inside: avoid !important; 
  break-inside: avoid !important; 
}

.keep-with-next { 
  page-break-after: avoid !important; 
}

.force-break { 
  page-break-before: always !important; 
}

/* === TABLEAUX MULTI-PAGES STABLES === */
table { 
  width: 100% !important; 
  max-width: 190mm !important;
  border-collapse: collapse !important; 
  page-break-inside: auto;
  table-layout: fixed !important;
  margin: 12px 0;
}

thead { 
  display: table-header-group !important;
  page-break-inside: avoid !important;
  page-break-after: avoid !important;
}

tfoot { 
  display: table-footer-group !important; 
  page-break-inside: avoid !important;
}

tr { 
  page-break-inside: avoid !important; 
}

td, th { 
  page-break-inside: avoid !important;
  padding: 6px 8px !important;
  border: 1px solid #e2e8f0;
  vertical-align: middle;
  word-wrap: break-word !important;
  overflow-wrap: break-word !important;
}

tbody tr:nth-child(even) { 
  background: #f8fafc; 
}

tbody tr:nth-child(odd) { 
  background: #ffffff; 
}

/* === SIGNATURES BLOC === */
.sig-block h5 { 
  margin: 0 0 2mm 0; 
  font: 600 12px/1.2 'Inter', sans-serif; 
  color: #111827; 
}

.sig-block .identity { 
  font: 600 12px/1.2 'Inter', sans-serif; 
  color: #111827; 
}

.sig-block .title { 
  font: 400 11px/1.2 'Inter', sans-serif; 
  color: #6B7280; 
}

.sig-image { 
  margin-top: 6mm; 
  max-height: 18mm; 
  max-width: 80mm;
  object-fit: contain;
}

.sig-pad {
  margin-top: 6mm; 
  height: 22mm; 
  border: 1px dashed #D1D5DB; 
  border-radius: 6px;
  display: flex; 
  align-items: center; 
  justify-content: center;
  font: 500 11px/1 'Inter', sans-serif; 
  color: #9CA3AF; 
  background: #fff;
}

/* === TOTAUX SUR MÊME LIGNE === */
.totals-section { 
  margin-top: 14mm; 
  page-break-inside: avoid !important;
}

.totals-row {
  display: flex; 
  gap: 8mm; 
  align-items: stretch; 
  flex-wrap: wrap;
  justify-content: center;
}

.totals-card {
  flex: 0 1 58mm; 
  border: 2px solid #FFD400; 
  border-radius: 8px; 
  padding: 6mm;
  background: #fff; 
  page-break-inside: avoid !important;
}

.totals-card h4 { 
  margin: 0 0 3mm 0; 
  font: 800 12px/1.1 'Inter', sans-serif; 
  color: #FFD400; 
  text-align: center; 
}

.totals-card .line { 
  display: flex; 
  justify-content: space-between; 
  margin: 2mm 0; 
  font: 600 11px/1.2 'Inter', sans-serif; 
  color: #374151; 
}

/* === TOTAL GÉNÉRAL === */
.grand-total {
  margin-top: 8mm; 
  border: 3px solid #FFD400; 
  border-radius: 10px; 
  padding: 7mm;
  text-align: center; 
  font: 900 14px/1.2 'Inter', sans-serif; 
  color: #FFD400;
  page-break-inside: avoid !important;
}

/* === REMARQUE IMPORTANTE === */
.final-remark {
  margin-top: 6mm; 
  padding: 4mm 6mm;
  background: #f8fafc;
  border-left: 4px solid #FFD400;
  font: 500 11px/1.4 'Inter', sans-serif; 
  color: #374151;
  border-radius: 0 4px 4px 0;
}

/* === BLOC FINAL GROUPÉ === */
.final-block { 
  margin-top: 12mm; 
  page-break-inside: avoid !important;
}

/* === CONTENU DES PAGES STANDARDS === */
.page-content { 
  padding-top: 6mm; 
  max-width: 190mm !important;
  width: 100% !important;
  margin: 0 auto !important;
  box-sizing: border-box !important;
}